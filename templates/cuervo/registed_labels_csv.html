{% extends "base.html" %}
{% load static %}
{% block stylesheets %}
<link href="/static/css/crud.css" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}
{% if user.is_authenticated %}
<div class="container">
    <h2 style="color: white; margin-bottom: 50px;">Registro de cargas</h2>

<table class="table" id="myTable">
		<thead style="background-color: #1e264e">
			<tr>
                <th>Folio</th>
                <th>URL</th>
                <th>Ministración</th>
                <th>Marca</th>
			</tr>
		</thead>
		<tbody>
		{% for log_file in init_labels %}
        <tr>
            <td>{{ log_file.uniqueid }}</td>
            <td>{{ log_file.url }}</td>
            <td>{{ log_file.ministrationNumber }}</td>
            <td>{{ log_file.brand.name }} - {{ log_file.brand.description }}</td>
        </tr>
        {% endfor %}
		</tbody>
	</table>
	<div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; Primera</a>
                <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
            {% endif %}

            <span style="color: white" class="current">
                Pagina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">Siguiente</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">Ultima &raquo;</a>
            {% endif %}
        </span>
    </div>

</div>

{% else %}
 <div class="w3-panel w3-yellow">
    <h3 style="color: white">No has iniciado sesión!</h3>
    <p style="color: white">Por favor acceda al siguiente <a href="{% url 'login' %}" class="create">Link</a> para iniciar sesión</p>
 </div>
{% endif %}
    <script>
        $(document).ready(function () {
            var table = $('#myTable').DataTable({
                "pageLength": 10,
                "lengthMenu": [10, 20]
            });
            generateBarcodes();
        });
    </script>
{% endblock content %}

